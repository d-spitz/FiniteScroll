<!DOCTYPE html>
<html lang="en">

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Finite Scroll</title>
<meta name="description" content="Nothing is forever, so why scroll?">
<meta name="author" content="David Spitz">

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=VT323&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="phone-frame">
    <header class="app-header">
      <h1>
        <span>F</span><span>i</span><span>n</span><span>i</span><span>t</span><span>e</span>
        <span>S</span><span>c</span><span>r</span><span>o</span><span>l</span><span>l</span>
      </h1>
    </header>

    <main class="scroll-container">
      {{CARDS}}
      <div class="end-message">
        <p>The end.</p>
        <p>Who's a good scroller?</p>
      </div>
    </main>

    <script>
      // Shuffle cards before first paint
      (function() {
        const container = document.querySelector('.scroll-container');
        const cards = Array.from(container.querySelectorAll('.card'));
        const endMessage = container.querySelector('.end-message');

        // Fisher-Yates shuffle
        for (let i = cards.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [cards[i], cards[j]] = [cards[j], cards[i]];
        }

        // Reappend in shuffled order
        cards.forEach(card => container.appendChild(card));
        container.appendChild(endMessage);

        // Scroll to top
        container.scrollTop = 0;
      })();
    </script>

    <footer class="app-footer">
      <nav class="footer-tabs">
        <a href="index.html" class="tab tab-active">Home</a>
        <a href="about.html" class="tab">About</a>
      </nav>
    </footer>

    <button class="add-button" aria-label="Submit a link" title="Submit a link"
      onclick="addContentDialog.showModal()">+</button>
  </div>

  <dialog class="submit-dialog" id="addContentDialog">
    <div class="dialog-content">
      <h2>Contribute</h2>
      <p>Share something worth learning. All submissions subject to review.</p>
      <form
        action="https://docs.google.com/forms/d/e/1FAIpQLSfr6PfBLMYVoNZjMP20BH896QwA9r7HBIu0WyfZ2Jvj1UZMow/formResponse"
        method="POST" target="_blank">
        <label>
          Title
          <input type="text" name="entry.299012504" required placeholder="e.g., Learn Haskell">
        </label>
        <label>
          Description
          <textarea name="entry.142594970" required placeholder="Why is this worth exploring?"></textarea>
        </label>
        <label>
          Link
          <input type="url" name="entry.204866637" required placeholder="https://...">
        </label>
        <label>
          Email
          <input type="email" name="entry.1493628903" required placeholder="your@email.com">
        </label>
        <div class="dialog-actions">
          <button type="button" class="cancel-button" onclick="addContentDialog.close()">Cancel</button>
          <button type="submit" class="submit-button">Submit</button>
        </div>
      </form>
    </div>
  </dialog>

</body>

</html>
